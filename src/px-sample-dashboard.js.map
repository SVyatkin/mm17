{"version":3,"sources":["px-sample-dashboard.es6.js"],"names":["Polymer","is","properties","title","type","String","value","mapData","Object","chartData","Array","_mapData","_costOfInvestment","Number","_powerConsumption","_renewableOutput","_carbonOffset","_savingsResponse","_carbonNuetralDate","observer","_residentialSliderPercentage","_commercialSliderPercentage","_industrialSliderPercentage","pieChartData","_inc1","_inc2","_inc3","_inc4","_inc5","_inc6","_inc7","_inc8","_inc9","_inc1Perc","_inc2Perc","_inc3Perc","_inc4Perc","_inc5Perc","_inc6Perc","_inc7Perc","_inc8Perc","_inc9Perc","attached","set","assign","markers","$","update","updateMap","evt","debounce","detail","percent","target","id","parseInt","arr","features","slice","handleSavingsResponse","e","PredictedConsumptionKWH","toLocaleString","SolarEnergyGenerationKWH","InitialCost","SolarOffsetKWH","toggleClass","kpi4","sliderChanged","base","res","com","ind","cn","savingsCalc","url","generateRequest","_adjustEconomicNumbers","perc","toFixed"],"mappings":"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","file":"px-sample-dashboard.js","sourcesContent":["(function () {\n  Polymer({\n    is: 'px-sample-dashboard',\n    properties: {\n      title: {\n        type: String,\n        value: \"\"\n      },\n      mapData: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n      chartData: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n      _mapData: {\n        type: Object,\n        value: function() {\n          return this.mapData;\n        }\n      },\n      _costOfInvestment: {\n        type: Number,\n        value: 0\n      },\n      _powerConsumption: {\n        type: Number,\n        value: 0\n      },\n      _renewableOutput: {\n        type: Number,\n        value: 0\n      },\n      _carbonOffset: {\n        type: Number,\n        value: 0\n      },\n      _savingsResponse: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n      _carbonNuetralDate: {\n        type: Number,\n        value: 2035,\n        observer: 'sliderChanged'\n      },\n      _residentialSliderPercentage: {\n        type: Number,\n        value: 0,\n        observer: 'sliderChanged'\n      },\n      _commercialSliderPercentage: {\n        type: Number,\n        value: 0,\n        observer: 'sliderChanged'\n      },\n      _industrialSliderPercentage: {\n        type: Number,\n        value: 0,\n        observer: 'sliderChanged'\n      },\n      pieChartData: {\n        type: Array,\n        value: function() {\n          return [{\n            \"x\": 43.4,\n            \"y\": \"2018 Energy & Utility Budget\",\n            \"colorIndex\": 2,\n            \"backgroundColor\": \"rgb(123,188,0)\"\n          }, {\n            \"x\": 1,\n            \"y\": \"Additional Recommended Subsidies\",\n            \"colorIndex\": 1,\n            \"backgroundColor\": \"rgb(226,141,23)\"\n          }, {\n            \"x\": 15,\n            \"y\": \"Other Sources\",\n            \"colorIndex\": 0,\n            \"backgroundColor\": \"rgb(90,191,248)\"\n          }]\n        }\n      },\n      _inc1: {\n        type: Number,\n        value: 0\n      },\n      _inc2: {\n        type: Number,\n        value: 0\n      },\n      _inc3: {\n        type: Number,\n        value: 0\n      },\n      _inc4: {\n        type: Number,\n        value: 0\n      },\n      _inc5: {\n        type: Number,\n        value: 0\n      },\n      _inc6: {\n        type: Number,\n        value: 0\n      },\n      _inc7: {\n        type: Number,\n        value: 0\n      },\n      _inc8: {\n        type: Number,\n        value: 0\n      },\n      _inc9: {\n        type: Number,\n        value: 0\n      },\n      _inc1Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc2Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc3Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc4Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc5Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc6Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc7Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc8Perc: {\n        type: Number,\n        value: 0\n      },\n      _inc9Perc: {\n        type: Number,\n        value: 0\n      }\n    },\n    attached() {\n      this.set('_mapData', Object.assign({}, this.mapData));\n      var markers = this.$.markers;\n      markers.set('data', this._mapData);\n      markers.update();\n    },\n    updateMap(evt) {\n      this.debounce('mapUpdate', function() {\n        if(evt.detail.value === 0) return;\n        var percent;\n        if(evt.target.id === \"res\") {\n          percent = 100000 * parseInt(evt.detail.value) / 100;\n        }\n        else {\n          percent = 1000 * parseInt(evt.detail.value) / 100;\n        }\n        var arr = this.mapData.features.slice(0, percent);\n        this.set('_mapData.type', 'FeatureCollection');\n        this.set('_mapData.features', arr);\n        var markers = this.$.markers;\n        markers.set('data', this._mapData);\n        markers.update();\n      },100);\n    },\n    handleSavingsResponse(e) {\n      this._powerConsumption = (this._savingsResponse.PredictedConsumptionKWH / 1000000).toLocaleString();\n      this._renewableOutput = (this._savingsResponse.SolarEnergyGenerationKWH / 1000000).toLocaleString();\n      this._costOfInvestment = (this._savingsResponse.InitialCost / 1000000).toLocaleString();\n      this._carbonOffset = (this._savingsResponse.SolarOffsetKWH / 1000000).toLocaleString();\n      this.toggleClass('green', parseInt(this._carbonOffset) < 0, this.$.kpi4);\n    },\n    sliderChanged(e) {\n      var base = \"https://savings-app.run.aws-usw02-pr.ice.predix.io\";\n\n      var res = (this._residentialSliderPercentage / 100) * 500000;\n      var com = (this._commercialSliderPercentage / 100) * 10000;\n      var ind = (this._industrialSliderPercentage / 100) * 2000;\n      var cn = this._carbonNuetralDate;\n\n      this.$.savingsCalc.url = base + \"/v1/savings?com=\" + com + \"&res=\" + res + \"&ind=\" + ind + \"&targetYear=\" + cn;\n      this.$.savingsCalc.generateRequest();\n\n      this._adjustEconomicNumbers(res, this._residentialSliderPercentage);\n    },\n    _adjustEconomicNumbers(res, perc) {\n      if(perc < 20) {\n        if((res * .65) >= 79409) {\n          this._inc9 = 79409;\n          this._inc9Perc = (100).toFixed(2);\n        } else {\n          this._inc9 = (res * .75).toFixed(0);\n          this._inc9Perc = ( ( ( res * .75) /  79409 ) * 100).toFixed(2);\n        }\n\n        this._inc8 = (res * .20).toFixed(0);\n        this._inc8Perc = ( ( ( res * .20) /  169548 ) * 100).toFixed(2);\n\n        this._inc7 = (res * .13).toFixed(0);\n        this._inc7Perc = ( ( ( res * .13) / 139502 ) * 100).toFixed(2);\n\n        this._inc6 = (res * .02);\n        this._inc6Perc = ( ( ( res * .02) / 181352 ) * 100).toFixed(2);\n\n      } else if(perc >= 20 && perc < 30) {\n        if((res * .50) >= 79409) {\n          this._inc9 = 79409;\n          this._inc9Perc = (100).toFixed(2);\n        } else {\n          this._inc9 = (res * .50).toFixed(0);\n          this._inc9Perc = ( ( ( res * .50) /  79409 ) * 100).toFixed(2);\n        }\n\n        this._inc8 = (res * .25).toFixed(0);\n        this._inc8Perc = ( ( ( res * .25) /  169548 ) * 100).toFixed(2);\n\n        this._inc7 = (res * .17).toFixed(0);\n        this._inc7Perc = ( ( ( res * .17) / 139502 ) * 100).toFixed(2);\n\n        this._inc6 = (res * .08).toFixed(0);\n        this._inc6Perc = ( ( ( res * .08) / 181352 ) * 100).toFixed(2);\n\n      } else if(perc >= 30 && perc < 50) {\n        if((res * .28) >= 79409) {\n          this._inc9 = 79409;\n          this._inc9Perc = (100).toFixed(2);\n        } else {\n          this._inc9 = (res * .28).toFixed(0);\n          this._inc9Perc = ( ( ( res * .28) /  79409 ) * 100).toFixed(2);\n        }\n\n        this._inc8 = (res * .32).toFixed(0);\n        this._inc8Perc = ( ( ( res * .32) /  169548 ) * 100).toFixed(2);\n\n        this._inc7 = (res * .25).toFixed(0);\n        this._inc7Perc = ( ( ( res * .25) / 139502 ) * 100).toFixed(2);\n\n        this._inc6 = (res * .15).toFixed(0);\n        this._inc6Perc = ( ( ( res * .15) / 181352 ) * 100).toFixed(2);\n      }\n\n    }\n  });\n})();\n"]}